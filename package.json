{
  "name": "gen-ai-starter-kit",
  "private": true,
  "workspaces": [
    "apps/*",
    "packages/*"
  ],
  "scripts": {
    "--- DEV ---": "---",
    "dev": "npm run kill-ports && npm run infra && concurrently -n api,web -c blue,green \"npm run dev -w api\" \"npm run dev -w web\"",
    "kill-ports": "lsof -ti:3000,5173 | xargs kill -9 2>/dev/null || true",
    "infra": "docker compose -f docker-compose.dev.yml up -d",
    "stop": "docker compose -f docker-compose.dev.yml stop",
    "reset": "docker compose -f docker-compose.dev.yml down -v && docker compose -f docker-compose.dev.yml up -d",
    "--- N8N ---": "---",
    "n8n:build": "cd apps/automation/custom-node && npm run build",
    "n8n:restart": "docker restart gen-ai-starter-kit-n8n",
    "n8n:export": "rm -f apps/automation/workflows/*.json && docker exec -u node gen-ai-starter-kit-n8n rm -rf /home/node/backups && docker exec -u node gen-ai-starter-kit-n8n mkdir -p /home/node/backups && docker exec -u node gen-ai-starter-kit-n8n n8n export:workflow --backup --output=/home/node/backups/ && (docker exec -u node gen-ai-starter-kit-n8n n8n export:credentials --all --encrypted --output=/home/node/backups/credentials.json || true) && docker cp gen-ai-starter-kit-n8n:/home/node/backups/. ./apps/automation/workflows/",
    "n8n:import": "docker cp ./apps/automation/workflows/. gen-ai-starter-kit-n8n:/home/node/backups/ && docker exec -u node gen-ai-starter-kit-n8n n8n import:workflow --input=/home/node/backups/ && docker exec -u node gen-ai-starter-kit-n8n n8n import:credentials --input=/home/node/backups/credentials.json",
    "n8n:seed:save": "docker exec gen-ai-starter-kit-db pg_dump -U app_user -d webapp --clean --if-exists > apps/automation/seed/init-n8n.sql",
    "--- DATABASE ---": "---",
    "db:studio": "cd apps/api && npm run db:studio",
    "db:migrate": "cd apps/api && npm run db:migrate",
    "prepare": "husky"
  },
  "devDependencies": {
    "concurrently": "^9.2.1",
    "husky": "^9.1.7"
  }
}
