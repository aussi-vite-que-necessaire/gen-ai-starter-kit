#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# 1. Quality Gate (Lint & Test on Staged Files)
npx lint-staged
npm run test

echo "ü§ñ Auto-exporting n8n workflows..."

# 2. Lance l'export (si Docker tourne)
npm run n8n:export

# 3. Ajoute les fichiers JSON g√©n√©r√©s au commit en cours
# C'est l'√©tape cl√© : sans √ßa, les fichiers seraient modifi√©s mais pas commit√©s
git add apps/automation/workflows/